{% extends "base.html" %}
{% block title %}Settings{% endblock %}
{% block content %}

<h1 class="text-light">Settings</h1>
<br>
<h2 class="text-light">Labels/Alerts</h2>
<h4 class="text-light">Show alerts of type</h4>
<form method="POST" action="/api/update-setting">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
  <div class="input-group">
    <input type="hidden" name="setting_type" value="alerts"></input>
    <select class="custom-select rounded p-2 mb-4" id="inputGroupSelect04" name="new_setting" onchange="this.form.submit()" style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;">
      <option value="high" {% if user.setting_alerts == "high" %}selected{% endif %}>Show alerts for almost every action.</option>
      <option value="low" {% if user.setting_alerts == "low" %}selected{% endif %}>Only show important alerts, don't show an alert for every action.</option>
    </select>
  </div>
</form>
<h2 class="text-light">Chatroom Settings</h2>
<h4 class="text-light">Deleted Messages</h4>
<form method="POST" action="/api/update-setting">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
  <div class="input-group">
    <input type="hidden" name="setting_type" value="deleted-messages"></input>
    <select class="custom-select rounded p-2" id="inputGroupSelect04" name="new_setting" onchange="this.form.submit()" style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;">
      <option value="show" {% if user.setting_deleted_messages == "show" %}selected{% endif %}>Show deleted messages.</option>
      <option value="hide" {% if user.setting_deleted_messages == "hide" %}selected{% endif %}>Hide deleted messages.</option>
    </select>
  </div>
</form>
<h4 class="text-light">Message Timestamps 24/12h</h4>
<form method="POST" action="/api/update-setting">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
  <div class="input-group">
    <input type="hidden" name="setting_type" value="timestamp-hour-type"></input>
    <select class="custom-select rounded p-2 mb-4" id="inputGroupSelect04" name="new_setting" onchange="this.form.submit()" style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;">
      <option value="12" {% if user.setting_timestamp_hour_type == "12" %}selected{% endif %}>Show 12h time.</option>
      <option value="24" {% if user.setting_timestamp_hour_type == "24" %}selected{% endif %}>Show 24h time.</option>
    </select>
  </div>
</form>
<div id="custom-javascript-default" style="display: none;">{{ user.customJavascript }}</div>
<h2 class="text-light">Custom Javascript</h4>
<h4 class="text-light">This will be run on all pages.</h2>
<h4 class="text-light">Do not edit the field below unless you know what you are doing!</h2>
<form method="POST" action="/api/update-setting">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
  <div class="input-group">
    <input type="hidden" name="setting_type" value="custom-javascript"></input>
    <input id="custom-js" class="form-control" style="border-radius: 5px;" type="text" name="content"></input>
  </div>
  <button type="submit" class="btn btn-primary mt-3">Save</button>
</form>
<script>
  document.getElementById("custom-js").value = document.getElementById("custom-javascript-default");
  document.getElementById("custom-js").onkeypress = function(e) {
   var key = e.charCode || e.keyCode || 0;     
   if (key == 13) {
     e.preventDefault();
   }
 } 
</script>
{% endblock %}
